<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>

 <body>
<div class="hole">
    <div class="profile">
    
        <img src="../assets/images/IMG20200903161128.jpg" id="prof-img">
       <input type="file" id="file">
       
       <label for="file" ><img src="../assets/images/photo-camera-interface-symbol-for-button.png" id="change_pic"></label>
    </div>
    <div class="whole">
    <div class="right">
     <div class="holediv">
       <div class="div-1"><i class="fa-solid fa-user-pen" ></i> </div>
       <div class="div-2">  <p class="type1">USER NAME:</p></div> 
    </div>
    <div class="holediv">
       <div class="div-1"> <i class="fa-solid fa-envelope" ></i></div>
        <div class="div-2"> <p class="type1">EMAIL ID:</p></div>
    </div>
    <div class="holediv">
       <div class="div-1"> <i class="fa-solid fa-address-book" ></i></div>
       <div class="div-2"> <p class="type1">ADD BIO:</p></div>
    </div>
    
    <div class="holediv">
       <div class="div-1"><i class="fa-solid fa-phone" ></i></div>
       <div class="div-2"> <p class="type1">MOBILE-NUMBER:</p></div>
    </div>
    
    <div class="holediv">
       <div class="div-1"> <i class="fa-solid fa-city" ></i> </div>
       <div class="div-2"> <p class="type1">CITY:</p></div>
    </div>
    <div class="holediv">
        <div class="div-1"> <i class="fa-solid fa-city" ></i> </div>
        <div class="div-2"> <p class="type1">ADDRESS:</p></div>
     </div>
    </div>
    <div class="left">
   <input type="text" class="type"  id="newname" >
   <!-- <p  class="type"id="newname" ></p>
    -->
   <!-- <i class="fa-solid fa-pen-to-square" id="edit"></i> -->
   
   <!-- <p  class="type"id="newemail" ></p> -->
   <input type="email" class="type"id="newemail"  >
   
   <!-- <i class="fa-solid fa-pen-to-square" id="edit1"></i> -->
   <input type="text" class="type" id="bio" >
   <!-- <i class="fa-solid fa-pen-to-square" id="edit2"></i> -->
   <input type="number" class="type" id="number" >
   <!-- <i class="fa-solid fa-pen-to-square" id="edit3"></i> -->
   <input type="text" class="type" id="city">
   <!-- <i class="fa-solid fa-pen-to-square" id="edit4"></i> -->
   <input type="text" class="type" id="address" >
   <!-- <i class="fa-solid fa-pen-to-square" id="edit4"></i> -->



   <button  id="btnn">
    edit
   </button>
   <button  id="update">
    update
   </button>

   <button  id="delete">
    delete
   </button>
    </div>

</div>
    <script>
        const img_div =document.querySelector(".profile")
        const profile_real =document.querySelector("#prof-img")
        const file=document.querySelector("#file")
        const uploadbtn=document.querySelector("#button")
        // when we choose file
        file.addEventListener('change',function(){
            // this refers to file
            const choosed_file = this.files[0]
            if(choosed_file) {
                const reader= new FileReader()
       // filereader is prdefiden function of js
                reader.addEventListener('load',function(){
                 
                 profile_real.setAttribute("src",reader.result)
             })
             reader.readAsDataURL(choosed_file)
            }
        })

        
           let user_profile_data = JSON.parse(localStorage.getItem("data"));
           let  user_pp=JSON.parse(localStorage.getItem("profile"));

           let res;


           user_profile_data.find(  // parameterized function 'a'
            e =>{
                    
                if(e["user_email"]==user_pp["email"]){
                     return res=e
                }
            }
            )


        document.getElementById("newname").value =res["user_name"];
    document.getElementById("newemail").value = res["user_email"];


            document.getElementById("update").addEventListener("click",e=>{
                e.preventDefault();

            res["user_name"]= document.getElementById("newname").value
            res["bio"]= document.getElementById("bio").value
            res["number"]= document.getElementById("number").value
            res["city"]= document.getElementById("city").value
            res["address"]= document.getElementById("address").value


 localStorage.setItem("data",JSON.stringify(user_profile_data))
            })


            document.getElementById("delete").addEventListener("click",event=>{
                event.preventDefault();
                console.log(res)
                let del=user_profile_data.indexOf(res)
                delete user_profile_data[del]  
             console.log(user_profile_data)
             localStorage.setItem("data",JSON.stringify(user_profile_data))
            
            })

console.log(user_profile_data)







    </script>
</body>

</html>